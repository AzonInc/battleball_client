<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Battleball</title>
  <style type="text/css">
  body
  {
    margin: 0 auto;
    background-color: #00aaaa;
    color: #dddddd;
  }
  canvas
  {
    position: absolute;
    width: 100%;
    position: absolute;
    width: 100%;
    height: 100%;
  }
  </style>

  <script src="./web-gallery/js/avatarimager.js"></script>

  <script>
  let Game = {};
  window.onload = function () {
    const canvas = document.querySelector('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    Game.avatarImager = new AvatarImager();

    ctx.fillStyle = "#00aaaa";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    Game.avatarImager.initialize().then(() => {

      const look = "sh-725-68.he-3258-1410-92.hr-3012-45.ch-665-110.lg-3006-110-110.hd-600-28";
      const direction = 3;
      const headDirection = direction;
      const action = ["wlk"];
      const gesture = ["std"];
      const frame = 0;
      const isHeadOnly = false;
      const scale = "n";

      console.log("ready.");

      Game.avatarImager.generate(new AvatarImage(look, direction, headDirection, action, gesture, frame, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30, 30);
      });

      Game.avatarImager.generate(new AvatarImage(look, direction, headDirection, action, gesture, 1, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120, 30);
      });

      Game.avatarImager.generate(new AvatarImage(look, direction, headDirection, action, gesture, 2, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120 + 120, 30);
      });

      Game.avatarImager.generate(new AvatarImage(look, direction, headDirection, action, gesture, 3, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120 + 120 + 120, 30);
      });

      Game.avatarImager.generate(new AvatarImage(look, 7, 7, action, gesture, frame, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30, 150);
      });

      Game.avatarImager.generate(new AvatarImage(look, 7, 7, action, gesture, 1, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120, 150);
      });

      Game.avatarImager.generate(new AvatarImage(look, 7, 7, action, gesture, 2, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120 + 120, 150);
      });

      Game.avatarImager.generate(new AvatarImage(look, 7, 7, action, gesture, 3, isHeadOnly, scale), (img) => {
        ctx.drawImage(img, 30 + 120 + 120 + 120, 150);
      });

    });
  };

  </script>

</head>
<body>
  <canvas id="game"></canvas>
</body>
</html>
